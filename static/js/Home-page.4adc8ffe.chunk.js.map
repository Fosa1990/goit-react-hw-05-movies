{"version":3,"sources":["pages/HomePage.js","services/moviesApi.js","helpers/toastyOptions.js"],"names":["MoviesList","lazy","HandlePageSwitch","HomePage","history","useHistory","location","useLocation","currentPage","URLSearchParams","search","get","useState","movies","setMovies","page","setPage","totalPages","setTotalPages","useEffect","API","then","data","results","total_pages","toast","error","errorOptions","catch","console","log","pushToHistory","value","push","fallback","url","MOVIES","length","onClick","event","name","currentTarget","PREV","state","Number","NEXT","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","pauseOnHover","draggable","draggablePercent","BASE_URL","API_KEY","fetchWithErrorhandling","a","config","hasQuery","axios","response","status","Promise","reject","Error","fetchTrendingMoviesByPage","fetchMoviesBySearch","query","fetchMovieDetails","id","fetchMovieCredits","fetchMovieReviews","fetchTrailer","warningOptions","progress","undefined","theme","infoOptions"],"mappings":"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","file":"static/js/Home-page.4adc8ffe.chunk.js","sourcesContent":["import { useState, useEffect, lazy, Suspense } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport * as API from '../services/moviesApi';\nimport { PREV, NEXT, MOVIES } from '../helpers/constants';\nimport Preloader from '../components/Preloader';\nimport { errorOptions } from '../helpers/toastyOptions';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nconst MoviesList = lazy(() =>\n  import('../components/MoviesList' /* webpackChunkName: \"Movies-list\"*/),\n);\nconst HandlePageSwitch = lazy(() =>\n  import(\n    '../components/HandlePageSwitch' /* webpackChunkName: \"Handle-page-switch\"*/\n  ),\n);\nexport default function HomePage() {\n  const history = useHistory();\n  const location = useLocation();\n  const currentPage = new URLSearchParams(location.search).get('page') ?? 1;\n  const [movies, setMovies] = useState([]);\n  const [page, setPage] = useState(currentPage);\n  const [totalPages, setTotalPages] = useState(0);\n  useEffect(() => {\n    API.fetchTrendingMoviesByPage(page)\n      .then(data => {\n        const { results, total_pages } = data;\n        if (!results) {\n          toast.error('No such results!', errorOptions);\n          return;\n        }\n        setMovies(results);\n        setTotalPages(total_pages);\n      })\n      .catch(error => {\n        toast.error('No images', errorOptions);\n        console.log('error on catch: ', error);\n      });\n  }, [page]);\n  const pushToHistory = value => {\n    history.push({ ...location, search: `page=${value}` });\n  };\n  const handleButtonClick = event => {\n    const { name } = event.currentTarget;\n    if (name === PREV && page > 1) {\n      setPage(state => Number(state) - 1);\n      pushToHistory(Number(page) - 1);\n    }\n    if (name === NEXT && page !== totalPages) {\n      setPage(state => Number(state) + 1);\n      pushToHistory(Number(page) + 1);\n    }\n  };\n  return (\n    <div>\n      <Suspense fallback={<Preloader />}>\n        <MoviesList movies={movies} url={`${MOVIES}/`} />\n        {movies.length > 1 && (\n          <HandlePageSwitch\n            onClick={handleButtonClick}\n            page={page}\n            totalPages={totalPages}\n          />\n        )}\n      </Suspense>\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={3000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        pauseOnHover\n        draggable\n        draggablePercent={60}\n      />\n    </div>\n  );\n}\n","import axios from 'axios';\nexport const BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = 'f6f92051b45422d9426f457ad6610127';\nconst API_YOUTUBE_KEY = 'f6f92051b45422d9426f457ad6610127';\nasync function fetchWithErrorhandling(url = '', config = {}) {\n  if (config.hasQuery) {\n    const response = await axios.get(url, config);\n    return response.status === 200 && response.data.results.length !== 0\n      ? response.data\n      : Promise.reject(new Error(console.log('Not found by query')));\n  }\n  const response = await axios.get(url, config);\n  return response.status === 200\n    ? response.data\n    : Promise.reject(new Error(console.log('Not found')));\n}\nexport function fetchTrendingMovies() {\n  return fetchWithErrorhandling(\n    `${BASE_URL}trending/all/week?api_key=${API_KEY}`,\n  );\n}\nexport function fetchTrendingMoviesByPage(page) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}trending/all/week?api_key=${API_KEY}&page=${page}`,\n  );\n}\nexport function fetchMoviesBySearch(page, query) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}search/movie?api_key=${API_KEY}&query=${query}&page=${page}&include_adult=false`,\n    { hasQuery: true },\n  );\n}\nexport function fetchMovieDetails(id) {\n  return fetchWithErrorhandling(`${BASE_URL}movie/${id}?api_key=${API_KEY}`);\n}\nexport function fetchMovieCredits(id) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/credits?api_key=${API_KEY}`,\n  );\n}\nexport function fetchMovieReviews(id) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/reviews?api_key=${API_KEY}`,\n  );\n}\nexport function fetchTrailer({ id }) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/videos?api_key=${API_YOUTUBE_KEY}&language=en-US`,\n  );\n}\n","export const warningOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n\nexport const errorOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n\nexport const infoOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n"],"sourceRoot":""}
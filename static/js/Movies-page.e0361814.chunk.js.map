{"version":3,"sources":["components/SearchForm/SearchForm.js","pages/MoviesPage.js","services/moviesApi.js","components/Button/Button.js","helpers/toastyOptions.js"],"names":["SearchForm","onSubmit","useState","query","setQuery","event","preventDefault","toast","warning","warningOptions","className","name","value","onChange","target","type","placeholder","autoComplete","autoFocus","Button","content","disabled","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","pauseOnHover","draggable","draggablePercent","MoviesList","lazy","HandlePageSwitch","MoviesPage","history","useHistory","location","useLocation","searchURL","URLSearchParams","search","get","currentPage","movies","setMovies","page","setPage","totalPages","setTotalPages","isFirstRender","useRef","useEffect","current","API","then","data","results","total_pages","length","info","infoOptions","error","errorOptions","catch","console","log","pushToHistory","push","input","fallback","Preloader","url","MOVIES","onClick","currentTarget","PREV","state","Number","NEXT","BASE_URL","API_KEY","fetchWithErrorhandling","a","config","hasQuery","axios","response","status","Promise","reject","Error","fetchTrendingMoviesByPage","fetchMoviesBySearch","fetchMovieDetails","id","fetchMovieCredits","fetchMovieReviews","fetchTrailer","defaultProps","progress","undefined","theme"],"mappings":"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","file":"static/js/Movies-page.e0361814.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { useState } from 'react';\nimport Button from '../Button';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { warningOptions } from '../../helpers/toastyOptions';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './SearchForm.css';\nexport default function SearchForm({ onSubmit }) {\n  const [query, setQuery] = useState('');\n  const handleFormInput = event => setQuery(event.target.value);\n  const onFormSubmit = event => {\n    event.preventDefault();\n    if (!query) {\n      toast.warning('Input some text!', warningOptions);\n      return;\n    }\n    onSubmit(query);\n    setQuery('');\n  };\n  return (\n    <>\n      <form onSubmit={onFormSubmit} className=\"search-form\">\n        <input\n          name=\"form-input\"\n          value={query}\n          onChange={handleFormInput}\n          type=\"text\"\n          className=\"form-input\"\n          placeholder=\"What are we looking for?\"\n          autoComplete=\"on\"\n          autoFocus\n        />\n        <Button\n          type=\"submit\"\n          name=\"searchButton\"\n          content=\"Search\"\n          disabled={false}\n          className=\"Button\"\n        />\n      </form>\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={3000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        pauseOnHover\n        draggable\n        draggablePercent={60}\n      />\n    </>\n  );\n}\nSearchForm.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import { useState, useEffect, useRef, lazy, Suspense } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport SearchForm from '../components/SearchForm';\nimport * as API from '../services/moviesApi';\nimport { PREV, NEXT, MOVIES } from '../helpers/constants';\nimport Preloader from '../components/Preloader';\nimport { errorOptions, infoOptions } from '../helpers/toastyOptions';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nconst MoviesList = lazy(() =>\n  import('../components/MoviesList' /* webpackChunkName: \"Movies-list\"*/),\n);\nconst HandlePageSwitch = lazy(() =>\n  import(\n    '../components/HandlePageSwitch' /* webpackChunkName: \"Handle-page-switch\"*/\n  ),\n);\nexport default function MoviesPage() {\n  const history = useHistory();\n  const location = useLocation();\n  const searchURL = new URLSearchParams(location.search).get('query') ?? '';\n  const currentPage = new URLSearchParams(location.search).get('page') ?? 1;\n  const [movies, setMovies] = useState([]);\n  const [page, setPage] = useState(currentPage);\n  const [query, setQuery] = useState('');\n  const [totalPages, setTotalPages] = useState(0);\n  const isFirstRender = useRef(true);\n  useEffect(() => {\n    if (isFirstRender.current) {\n      isFirstRender.current = false;\n      return;\n    }\n    API.fetchMoviesBySearch(page, query)\n      .then(data => {\n        const { results, total_pages } = data;\n        if (!results) {\n          toast.error('No such results!', errorOptions);\n          return;\n        }\n        if (results.length > 1) toast.info('Enjoy!', infoOptions);\n        setMovies(results);\n        setTotalPages(total_pages);\n      })\n      .catch(error => {\n        toast.error(`No images by \"${query}\"!`, errorOptions);\n        console.log('error on catch: ', error);\n      });\n  }, [page, query]);\n  useEffect(() => {\n    if (searchURL === '') return;\n    setQuery(searchURL);\n  }, [searchURL]);\n  const pushToHistory = (query, value) => {\n    history.push({\n      ...location,\n      search: `query=${query}&page=${value}`,\n    });\n  };\n  const handleButtonClick = event => {\n    const { name } = event.currentTarget;\n    if (name === PREV && page > 1) {\n      setPage(state => Number(state) - 1);\n      pushToHistory(query, Number(page) - 1);\n    }\n    if (name === NEXT && page !== totalPages) {\n      setPage(state => Number(state) + 1);\n      pushToHistory(query, Number(page) + 1);\n    }\n  };\n  const handleFormSubmit = input => {\n    if (query === input) return;\n    setQuery(input);\n    pushToHistory(input, page);\n  };\n  return (\n    <div>\n      <SearchForm onSubmit={handleFormSubmit} />\n      <Suspense fallback={<Preloader />}>\n        <MoviesList movies={movies} url={`${MOVIES}/`} />\n        {movies.length > 1 && (\n          <HandlePageSwitch\n            onClick={handleButtonClick}\n            page={page}\n            totalPages={totalPages}\n          />\n        )}\n      </Suspense>\n      <ToastContainer\n        position=\"top-right\"\n        autoClose={3000}\n        hideProgressBar={false}\n        newestOnTop\n        closeOnClick\n        rtl={false}\n        pauseOnFocusLoss\n        pauseOnHover\n        draggable\n        draggablePercent={60}\n      />\n    </div>\n  );\n}\n","import axios from 'axios';\nexport const BASE_URL = 'https://api.themoviedb.org/3/';\nconst API_KEY = 'f6f92051b45422d9426f457ad6610127';\nconst API_YOUTUBE_KEY = 'f6f92051b45422d9426f457ad6610127';\nasync function fetchWithErrorhandling(url = '', config = {}) {\n  if (config.hasQuery) {\n    const response = await axios.get(url, config);\n    return response.status === 200 && response.data.results.length !== 0\n      ? response.data\n      : Promise.reject(new Error(console.log('Not found by query')));\n  }\n  const response = await axios.get(url, config);\n  return response.status === 200\n    ? response.data\n    : Promise.reject(new Error(console.log('Not found')));\n}\nexport function fetchTrendingMovies() {\n  return fetchWithErrorhandling(\n    `${BASE_URL}trending/all/week?api_key=${API_KEY}`,\n  );\n}\nexport function fetchTrendingMoviesByPage(page) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}trending/all/week?api_key=${API_KEY}&page=${page}`,\n  );\n}\nexport function fetchMoviesBySearch(page, query) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}search/movie?api_key=${API_KEY}&query=${query}&page=${page}&include_adult=false`,\n    { hasQuery: true },\n  );\n}\nexport function fetchMovieDetails(id) {\n  return fetchWithErrorhandling(`${BASE_URL}movie/${id}?api_key=${API_KEY}`);\n}\nexport function fetchMovieCredits(id) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/credits?api_key=${API_KEY}`,\n  );\n}\nexport function fetchMovieReviews(id) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/reviews?api_key=${API_KEY}`,\n  );\n}\nexport function fetchTrailer({ id }) {\n  return fetchWithErrorhandling(\n    `${BASE_URL}movie/${id}/videos?api_key=${API_YOUTUBE_KEY}&language=en-US`,\n  );\n}\n","import PropTypes from 'prop-types';\nimport './Button.css';\nexport default function Button({ content, name, type, onClick, disabled }) {\n  return (\n    <button\n      type={type}\n      name={name}\n      onClick={onClick}\n      disabled={disabled}\n      className=\"Button\"\n    >\n      {content}\n    </button>\n  );\n}\nButton.defaultProps = {\n  type: 'button',\n  onClick: () => null,\n};\nButton.propTypes = {\n  content: PropTypes.string,\n  name: PropTypes.string,\n  type: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n  disabled: PropTypes.bool,\n};\n","export const warningOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n\nexport const errorOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n\nexport const infoOptions = {\n  position: 'top-right',\n  autoClose: 3000,\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined,\n  theme: 'dark',\n};\n"],"sourceRoot":""}
(this["webpackJsonpgoit-react-hw-05-movies"]=this["webpackJsonpgoit-react-hw-05-movies"]||[]).push([[6],{123:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));var r=n(54),c=n(43),o=n(0),a=n(2),u=n(45),s=n(55),i=n(48),l=(n(52),n(83),n(1));function b(e){var t=e.onSubmit,n=Object(o.useState)(""),r=Object(c.a)(n,2),a=r[0],b=r[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a?(t(a),b("")):s.b.warning("Input some text!",i.c)},className:"search-form",children:[Object(l.jsx)("input",{name:"form-input",value:a,onChange:function(e){return b(e.target.value)},type:"text",className:"form-input",placeholder:"What are we looking for?",autoComplete:"on",autoFocus:!0}),Object(l.jsx)(u.a,{type:"submit",name:"searchButton",content:"Search",disabled:!1,className:"Button"})]}),Object(l.jsx)(s.a,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:60})]})}var f=n(42),d=n(10),p=n(16),g=Object(o.lazy)((function(){return n.e(5).then(n.bind(null,117))})),h=Object(o.lazy)((function(){return n.e(2).then(n.bind(null,118))}));function j(){var e,t,n=Object(a.useHistory)(),u=Object(a.useLocation)(),j=null!==(e=new URLSearchParams(u.search).get("query"))&&void 0!==e?e:"",O=null!==(t=new URLSearchParams(u.search).get("page"))&&void 0!==t?t:1,m=Object(o.useState)([]),v=Object(c.a)(m,2),k=v[0],y=v[1],x=Object(o.useState)(O),w=Object(c.a)(x,2),C=w[0],P=w[1],S=Object(o.useState)(""),N=Object(c.a)(S,2),B=N[0],_=N[1],H=Object(o.useState)(0),E=Object(c.a)(H,2),L=E[0],q=E[1],F=Object(o.useRef)(!0);Object(o.useEffect)((function(){F.current?F.current=!1:f.d(C,B).then((function(e){var t=e.results,n=e.total_pages;t?(t.length>1&&s.b.info("Enjoy!",i.b),y(t),q(n)):s.b.error("No such results!",i.a)})).catch((function(e){s.b.error('No images by "'.concat(B,'"!'),i.a),console.log("error on catch: ",e)}))}),[C,B]),Object(o.useEffect)((function(){""!==j&&_(j)}),[j]);var R=function(e,t){n.push(Object(r.a)(Object(r.a)({},u),{},{search:"query=".concat(e,"&page=").concat(t)}))};return Object(l.jsxs)("div",{children:[Object(l.jsx)(b,{onSubmit:function(e){B!==e&&(_(e),R(e,C))}}),Object(l.jsxs)(o.Suspense,{fallback:Object(l.jsx)(p.a,{}),children:[Object(l.jsx)(g,{movies:k,url:"".concat(d.d,"/")}),k.length>1&&Object(l.jsx)(h,{onClick:function(e){var t=e.currentTarget.name;t===d.f&&C>1&&(P((function(e){return Number(e)-1})),R(B,Number(C)-1)),t===d.e&&C!==L&&(P((function(e){return Number(e)+1})),R(B,Number(C)+1))},page:C,totalPages:L})]}),Object(l.jsx)(s.a,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:60})]})}},42:function(e,t,n){"use strict";n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return h})),n.d(t,"e",(function(){return j}));var r=n(49),c=n(50),o=n.n(c),a=n(51),u=n.n(a),s="https://api.themoviedb.org/3/",i="f6f92051b45422d9426f457ad6610127";function l(){return b.apply(this,arguments)}function b(){return b=Object(r.a)(o.a.mark((function e(){var t,n,r,c,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:"",!(n=a.length>1&&void 0!==a[1]?a[1]:{}).hasQuery){e.next=7;break}return e.next=5,u.a.get(t,n);case 5:return r=e.sent,e.abrupt("return",200===r.status&&0!==r.data.results.length?r.data:Promise.reject(new Error(console.log("Not found by query"))));case 7:return e.next=9,u.a.get(t,n);case 9:return c=e.sent,e.abrupt("return",200===c.status?c.data:Promise.reject(new Error(console.log("Not found"))));case 11:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function f(e){return l("".concat(s,"trending/all/week?api_key=").concat(i,"&page=").concat(e))}function d(e,t){return l("".concat(s,"search/movie?api_key=").concat(i,"&query=").concat(t,"&page=").concat(e,"&include_adult=false"),{hasQuery:!0})}function p(e){return l("".concat(s,"movie/").concat(e,"?api_key=").concat(i))}function g(e){return l("".concat(s,"movie/").concat(e,"/credits?api_key=").concat(i))}function h(e){return l("".concat(s,"movie/").concat(e,"/reviews?api_key=").concat(i))}function j(e){var t=e.id;return l("".concat(s,"movie/").concat(t,"/videos?api_key=").concat("f6f92051b45422d9426f457ad6610127","&language=en-US"))}},44:function(e,t,n){},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(44);var r=n(1);function c(e){var t=e.content,n=e.name,c=e.type,o=e.onClick,a=e.disabled;return Object(r.jsx)("button",{type:c,name:n,onClick:o,disabled:a,className:"Button",children:t})}c.defaultProps={type:"button",onClick:function(){return null}}},48:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return o}));var r={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"},c={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"},o={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}},83:function(e,t,n){}}]);
//# sourceMappingURL=Movies-page.e0361814.chunk.js.map